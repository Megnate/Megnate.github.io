---
title: 地质影响因素
date: 2021-03-04 09:27:42
tags: 地质
---

### 知识图谱

<!--more-->

使用`py2neo`在`neo4j`上建立图谱的样子

```python
from py2neo import Graph, Node, Relationship, NodeMatcher
g = Graph('http://localhost:7474',user='neo4j',password='123456')
matcher = NodeMatcher(g)


# 验证节点是否创建成功
def matchNode(label, name):
    if matcher.match(label, name=name).first() is None:
        node = Node(label, name=name)
        g.create(node)


matchNode('地质因素', '地质因素')
matchNode('钻完井因素', '钻完井因素')
matchNode('压裂因素', '压裂因素')
matchNode('排采因素', '排采因素')
matchNode('产气量', '产气量')

list_0 = ['煤储层厚度', '渗透率', '生产层位', '有效孔隙度', '储层温度', '含气饱和度', '灰分', '水分', '泥质含量', '煤层海拔',
          '粘土', '挥发分', '煤层顶深', '破裂压力', '闭合压力', '原始储层压力', '临界解吸压力', '最大镜质组反射率', '吨煤含气量',
          '顶板砂岩厚度', '底板砂岩厚度', '底板砂岩含砂比例', '割理', '煤级', '兰氏体积', '兰氏压力', '镜质组', '惰质组', '壳质组']
# 镜质组，惰质组，壳质组可以确定煤岩类型

list_1 = ['井型', '储层井径', '完钻井深', '钻井液类型', '钻井液密度', '钻井液黏度', '钻压', '水泥浆密度', '完井方法', '水泥浆用量']
# 完井方法有：洞穴完井，裸眼完井，套管完井，射孔完井

list_2 = ['前置液量', '携砂液量', '顶替液量', '加砂量', '平均砂比', '压裂液总用量', '压裂泵压', '支撑剂粒径', '支撑剂类型'
          '排量', '射孔厚度', '射孔孔数', '射孔密度']
# 压裂效果：裂缝宽度，裂缝高度，压裂后渗透率，反排时间
# 加砂量：会影响缝宽，缝长，能释放更大范围的应力，增加煤层气井的降压范围，加砂量的使用会影响压裂液的用量
# 前置液，携砂液，顶替液都要随着时间发生变化，可能得需要分开来描述

list_3 = ['初始井底流压', '静动液面高度', '冲次', '解吸动液面高度', '解吸套压', '解吸井底压力', '动液面下降速度', '平均排量',
          '泵效', '泵径', '平均日产水量', '解吸累计产水量', '停泵压力']

list_xx = []
list_xx.extend(list_0)
list_xx.extend(list_1)
list_xx.extend(list_2)
list_xx.extend(list_3)

for i in list_xx:
    matchNode('影响因素', i)


'''
找出需要边的节点，如果不存在就创建新的，存在就创建关系
'''
def createRel(name1, name2):
    node_x = matcher.match(name=name1).first()
    node_y = matcher.match(name=name2).first()
    matchNode('影响因素', name1)
    matchNode('影响因素', name2)
    if node_x is not None and node_y is not None:
        # 查看关系是否存在
        cmd = "MATCH a=()-[:%s]->( {name: '%s'}) RETURN a" % ('影响', 'cause')
        if len(g.run(cmd).data()) == 0:
            relatp = Relationship(node_x, '影响', node_y)
            g.create(relatp)


for i in list_0:
    createRel(i, '地质因素')
for i in list_1:
    createRel(i, '钻完井因素')
for i in list_2:
    createRel(i, '压裂因素')
for i in list_3:
    createRel(i, '排采因素')
createRel('地质因素', '产气量')
createRel('钻完井因素', '产气量')
createRel('压裂因素', '产气量')
createRel('排采因素', '产气量')

# 每个因素的关系
createRel('煤储层厚度', '原始储层压力')
createRel('原始储层压力', '有效孔隙度')
createRel('有效孔隙度', '渗透率')
createRel('煤层顶深', '渗透率')
createRel('含气饱和度', '原始储层压力')
createRel('顶板砂岩厚度', '渗透率')
createRel('底板砂岩厚度', '渗透率')
createRel('原始储层压力', '渗透率')
createRel('闭合压力', '渗透率')
createRel('破裂压力', '渗透率')
createRel('水分', '煤级')
createRel('挥发分', '煤级')
createRel('最大镜质组反射率', '煤级')
createRel('储层温度', '煤级')
createRel('原始储层压力', '煤级')
createRel('煤层顶深', '原始储层压力')
createRel('煤层顶深', '储层温度')
createRel('煤级', '割理')
createRel('吨煤含气量', '含气饱和度')
createRel('钻井液密度', '钻井液类型')
createRel('钻井液黏度', '钻井液类型')
createRel('钻井液类型', '渗透率')
createRel('压裂液总用量', '渗透率')
createRel('煤级', '渗透率')
createRel('镜质组', '渗透率')
createRel('惰质组', '渗透率')
createRel('壳质组', '渗透率')
createRel('最大镜质组反射率', '割理')
createRel('煤层海拔', '平均日产水量')
createRel('加砂量', '压裂液总用量')
createRel('动液面下降速度', '解吸套压')
createRel('解吸动液面高度', '解吸井底压力')
createRel('临界解吸压力', '解吸累计产水量')

print('全部完成')
```

### 接下去工作

- 整理数据，尽量找出100口井的相关数据
- 学习知识图谱前面的知识提取等技术
- 学习知识图谱可视化技术，在web端进行展示
- 掌握GNN，对整理好的图谱数据进行分析

### 地质

高煤阶煤层气排水采气分为以下阶段：

- 排水阶段：动液面下降速度（5-7m/d），套管环空压达到0.101-0.2MPa时进入憋压阶段
- 憋压阶段：套管环空压升到0.7-2.0MPa时放出煤层气，稳定井底流压，日降动液面0-3m/d，井底流压被动控制在0-0.03MPa
- 控压阶段：初始控制在100-200m^3^，套管环形压力下降速度在0-0.15MPa/h之间，增大放气量在200-300m^3^，套管压力在0.01-0.02MPa进入稳产阶段
- 稳产阶段：动液面高度维持在煤层顶板以上15-30m，确定动液面后，动液面高度波动在0-2m。井底流压控制在0-0.02MPa
- 衰减阶段：井口套压和井底流压在0.101-0.11MPa，此时日产气量连续一个月下降500-1000m^3^/d

高煤阶煤层气井排水采气的方法，李仰民，胡书宝，李梦溪，秦义，张建国，白建梅，王立龙，中国石油天然气股份有限公司



































